{
    "bug_id": 136,
    "classification": {
        "singleLine": false
    },
    "commit": "205420e2",
    "failing_tests": [
        "org.apache.camel.component.vm.VmWaitForTaskCompleteTest",
        "org.apache.camel.component.seda.SedaWaitForTaskCompleteTest",
        "org.apache.camel.issues.MulticastPipelineAggregateIssueTest"
    ],
    "files": 1,
    "jira_id": "3276",
    "linesAdd": 5,
    "linesRem": 1,
    "nb_error": 1,
    "nb_failure": 2,
    "nb_skipped": 0,
    "nb_test": 2911,
    "patch": "diff --git a/camel-core/src/main/java/org/apache/camel/util/ExchangeHelper.java b/camel-core/src/main/java/org/apache/camel/util/ExchangeHelper.java\nindex 0aa9501..7b59811 100644\n--- a/camel-core/src/main/java/org/apache/camel/util/ExchangeHelper.java\n+++ b/camel-core/src/main/java/org/apache/camel/util/ExchangeHelper.java\n@@ -208,11 +208,15 @@ public static void copyResults(Exchange result, Exchange source) {\n                 // have created any OUT; such as a mock:endpoint\n                 // so lets assume the last IN is the OUT\n                 if (result.getPattern().isOutCapable()) {\n-                    // only set OUT if its OUT capable\n+                    // only set OUT if its OUT capable or already has OUT\n                     result.getOut().copyFrom(source.getIn());\n                 } else {\n                     // if not replace IN instead to keep the MEP\n                     result.getIn().copyFrom(source.getIn());\n+                    // clear any existing OUT as the result is on the IN\n+                    if (result.hasOut()) {\n+                        result.setOut(null);\n+                    }\n                 }\n             }\n \n",
    "project": "camel"
}