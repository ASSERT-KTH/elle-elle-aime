{
    "bug_id": 94,
    "classification": {
        "singleLine": false
    },
    "commit": "a2c2d38a",
    "failing_tests": [
        "org.apache.accumulo.core.util.UnsynchronizedBufferTest"
    ],
    "files": 1,
    "jira_id": "4098",
    "linesAdd": 2,
    "linesRem": 2,
    "nb_error": 0,
    "nb_failure": 1,
    "nb_skipped": 2,
    "nb_test": 711,
    "patch": "diff --git a/core/src/main/java/org/apache/accumulo/core/util/UnsynchronizedBuffer.java b/core/src/main/java/org/apache/accumulo/core/util/UnsynchronizedBuffer.java\nindex 6947d64f6..f35361384 100644\n--- a/core/src/main/java/org/apache/accumulo/core/util/UnsynchronizedBuffer.java\n+++ b/core/src/main/java/org/apache/accumulo/core/util/UnsynchronizedBuffer.java\n@@ -118,8 +118,8 @@ public Reader(byte b[]) {\n     }\n \n     public Reader(ByteBuffer buffer) {\n-      if (buffer.hasArray()) {\n-        offset = buffer.arrayOffset();\n+      if (buffer.hasArray() && buffer.array().length == buffer.arrayOffset() + buffer.limit()) {\n+        offset = buffer.arrayOffset() + buffer.position();\n         data = buffer.array();\n       } else {\n         data = new byte[buffer.remaining()];\n",
    "project": "accumulo",
    "buggy_compile_success": false,
    "buggy_test_success": false,
    "fixed_compile_success": false,
    "fixed_test_success": false
}