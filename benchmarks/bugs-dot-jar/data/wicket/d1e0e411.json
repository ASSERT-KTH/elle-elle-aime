{
  "files": 5, 
  "nb_test": 1242, 
  "nb_error": 0, 
  "classification": {
    "singleLine": false
  }, 
  "failing_tests": [
    "org.apache.wicket.markup.outputTransformer.OutputTransformerContainerTest"
  ], 
  "patch": "diff --git a/wicket-core/src/main/java/org/apache/wicket/MarkupContainer.java b/wicket-core/src/main/java/org/apache/wicket/MarkupContainer.java\nindex ebbe98fa58..17f43d72da 100644\n--- a/wicket-core/src/main/java/org/apache/wicket/MarkupContainer.java\n+++ b/wicket-core/src/main/java/org/apache/wicket/MarkupContainer.java\n@@ -1811,12 +1811,8 @@ public void component(Component component, IVisit<Void> visit)\n \tprotected void onAfterRenderChildren()\n \t{\n \t\t// Loop through child components\n-\t\tfinal Iterator<? extends Component> iter = iterator();\n-\t\twhile (iter.hasNext())\n+\t\tfor (Component child : this)\n \t\t{\n-\t\t\t// Get next child\n-\t\t\tfinal Component child = iter.next();\n-\n \t\t\t// Call end request on the child\n \t\t\tchild.afterRender();\n \t\t}\ndiff --git a/wicket-core/src/main/java/org/apache/wicket/markup/MarkupResourceStream.java b/wicket-core/src/main/java/org/apache/wicket/markup/MarkupResourceStream.java\nindex 95cd456c1d..9e26187f23 100644\n--- a/wicket-core/src/main/java/org/apache/wicket/markup/MarkupResourceStream.java\n+++ b/wicket-core/src/main/java/org/apache/wicket/markup/MarkupResourceStream.java\n@@ -45,6 +45,9 @@\n \n \tprivate static final Logger log = LoggerFactory.getLogger(MarkupResourceStream.class);\n \n+\t/** */\n+\tpublic static final String WICKET_XHTML_DTD = \"http://wicket.apache.org/dtds.data/wicket-xhtml1.4-strict.dtd\";\n+\n \tprivate static final Pattern DOCTYPE_REGEX = Pattern.compile(\"!DOCTYPE\\\\s+(.*)\\\\s*\");\n \n \t/** The associated markup resource stream */\n@@ -68,10 +71,7 @@\n \t/** The encoding as found in <?xml ... encoding=\"\" ?>. Null, else */\n \tprivate String encoding;\n \n-\t/**\n-\t * Wicket namespace: <html\n-\t * xmlns:wicket=\"http://wicket.apache.org/dtds.data/wicket-xhtml1.3-strict.dtd>\n-\t */\n+\t/** Wicket namespace: see WICKET_XHTML_DTD */\n \tprivate String wicketNamespace;\n \n \t/** == wicket namespace name + \":id\" */\ndiff --git a/wicket-core/src/main/java/org/apache/wicket/markup/transformer/AbstractTransformerBehavior.java b/wicket-core/src/main/java/org/apache/wicket/markup/transformer/AbstractTransformerBehavior.java\nindex 0e82dc3d30..be0490b983 100644\n--- a/wicket-core/src/main/java/org/apache/wicket/markup/transformer/AbstractTransformerBehavior.java\n+++ b/wicket-core/src/main/java/org/apache/wicket/markup/transformer/AbstractTransformerBehavior.java\n@@ -19,7 +19,6 @@\n import org.apache.wicket.Component;\n import org.apache.wicket.WicketRuntimeException;\n import org.apache.wicket.behavior.Behavior;\n-import org.apache.wicket.markup.ComponentTag;\n import org.apache.wicket.protocol.http.BufferedWebResponse;\n import org.apache.wicket.request.cycle.RequestCycle;\n import org.apache.wicket.request.http.WebResponse;\n@@ -58,12 +57,6 @@ protected BufferedWebResponse newResponse(final WebResponse originalResponse)\n \t\treturn new BufferedWebResponse(originalResponse);\n \t}\n \n-\t@Override\n-\tpublic void onComponentTag(final Component component, final ComponentTag tag)\n-\t{\n-\t\ttag.put(\"xmlns:wicket\", \"http://wicket.apache.org\");\n-\t}\n-\n \t@Override\n \tpublic void beforeRender(Component component)\n \t{\ndiff --git a/wicket-core/src/main/java/org/apache/wicket/markup/transformer/XsltOutputTransformerContainer.java b/wicket-core/src/main/java/org/apache/wicket/markup/transformer/XsltOutputTransformerContainer.java\nindex 873c47652e..d09c100d56 100644\n--- a/wicket-core/src/main/java/org/apache/wicket/markup/transformer/XsltOutputTransformerContainer.java\n+++ b/wicket-core/src/main/java/org/apache/wicket/markup/transformer/XsltOutputTransformerContainer.java\n@@ -18,6 +18,7 @@\n \n import org.apache.wicket.AttributeModifier;\n import org.apache.wicket.Component;\n+import org.apache.wicket.markup.MarkupResourceStream;\n import org.apache.wicket.markup.MarkupType;\n import org.apache.wicket.model.IModel;\n import org.apache.wicket.model.Model;\n@@ -74,7 +75,7 @@ public XsltOutputTransformerContainer(final String id, final IModel<?> model,\n \t\t// Make the XSLT processor happy and allow him to handle the wicket\n \t\t// tags and attributes which are in the wicket namespace\n \t\tadd(AttributeModifier.replace(\"xmlns:wicket\",\n-\t\t\tModel.of(\"http://wicket.apache.org/dtds.data/wicket-xhtml1.3-strict.dtd\")));\n+\t\t\tModel.of(MarkupResourceStream.WICKET_XHTML_DTD)));\n \t}\n \n \t/**\ndiff --git a/wicket-core/src/main/java/org/apache/wicket/markup/transformer/XsltTransformerBehavior.java b/wicket-core/src/main/java/org/apache/wicket/markup/transformer/XsltTransformerBehavior.java\nindex 97a16808dd..d1c3efabd4 100644\n--- a/wicket-core/src/main/java/org/apache/wicket/markup/transformer/XsltTransformerBehavior.java\n+++ b/wicket-core/src/main/java/org/apache/wicket/markup/transformer/XsltTransformerBehavior.java\n@@ -20,6 +20,7 @@\n import org.apache.wicket.Page;\n import org.apache.wicket.WicketRuntimeException;\n import org.apache.wicket.markup.ComponentTag;\n+import org.apache.wicket.markup.MarkupResourceStream;\n \n /**\n  * An IBehavior which can be added to any component except ListView. It allows to post-process\n@@ -69,10 +70,10 @@ public XsltTransformerBehavior(final String xslFilePath)\n \t@Override\n \tpublic void onComponentTag(final Component component, final ComponentTag tag)\n \t{\n-\t\ttag.put(\"xmlns:wicket\", \"http://wicket.apache.org/dtds.data/wicket-xhtml1.3-strict.dtd\");\n-\n \t\t// Make the XSLT processor happy and allow it to handle the wicket tags\n \t\t// and attributes that are in the wicket namespace\n+\t\ttag.put(\"xmlns:wicket\", MarkupResourceStream.WICKET_XHTML_DTD);\n+\n \t\tsuper.onComponentTag(component, tag);\n \t}\n \n", 
  "project": "wicket", 
  "linesAdd": 10, 
  "jira_id": "3861", 
  "nb_skipped": 2, 
  "commit": "d1e0e411", 
  "nb_failure": 2, 
  "linesRem": 19
}